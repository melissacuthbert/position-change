<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mid-Month Pay Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: "Inter", sans-serif; }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8 flex items-center justify-center min-h-screen">

    <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl w-full max-w-4xl border border-gray-200">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-6 text-center">Mid-Month Pay Calculator</h1>
        <p class="text-center text-gray-600 mb-8">
            Calculate prorated base salary and commission for a mid-month position change.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <!-- Original Position Inputs -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <h2 class="text-xl font-bold text-gray-800 mb-4">Original Position</h2>
                <div class="space-y-4">
                    <div>
                        <label for="originalAnnualSalary" class="block text-sm font-medium text-gray-700">Annual Base Salary</label>
                        <input type="number" id="originalAnnualSalary" value="50380" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="originalWeeklyHours" class="block text-sm font-medium text-gray-700">Weekly Hours</label>
                        <input type="number" id="originalWeeklyHours" value="32" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="originalMonthlyQuota" class="block text-sm font-medium text-gray-700">Monthly Quota ($)</label>
                        <input type="number" id="originalMonthlyQuota" value="9250" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="originalCommissionPercentage" class="block text-sm font-medium text-gray-700">Commission % (e.g., 0.52 for 52%)</label>
                        <input type="number" step="0.01" id="originalCommissionPercentage" value="0.52" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                </div>
            </div>

            <!-- New Position Inputs -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <h2 class="text-xl font-bold text-gray-800 mb-4">New Position</h2>
                <div class="space-y-4">
                    <div>
                        <label for="changeDate" class="block text-sm font-medium text-gray-700">Date of Change</label>
                        <input type="date" id="changeDate" value="2025-07-20" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="newAnnualSalary" class="block text-sm font-medium text-gray-700">New Annual Base Salary</label>
                        <input type="number" id="newAnnualSalary" value="42900" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="newWeeklyHours" class="block text-sm font-medium text-gray-700">New Weekly Hours</label>
                        <input type="number" id="newWeeklyHours" value="24" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="newMonthlyQuota" class="block text-sm font-medium text-gray-700">New Monthly Quota ($)</label>
                        <input type="number" id="newMonthlyQuota" value="6500" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                    <div>
                        <label for="newCommissionPercentage" class="block text-sm font-medium text-gray-700">Commission % (e.g., 0.60 for 60%)</label>
                        <input type="number" step="0.01" id="newCommissionPercentage" value="0.60" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
                    </div>
                </div>
            </div>
        </div>

        <!-- Revenue Input -->
        <div class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Actual Monthly Revenue</h2>
            <label for="totalMonthlyRevenue" class="block text-sm font-medium text-gray-700">Total Monthly Revenue Achieved ($)</label>
            <input type="number" id="totalMonthlyRevenue" value="18000" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2.5">
        </div>

        <button id="calculateButton" class="w-full bg-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200">
            Calculate Pay
        </button>

        <!-- Results Section -->
        <div id="results" class="mt-8 p-6 bg-blue-50 rounded-xl border border-blue-200 shadow-inner hidden">
            <h2 class="text-2xl font-bold text-blue-800 mb-4 text-center">Results</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-center text-gray-800">
                <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-100">
                    <p class="text-sm font-medium text-gray-500">Prorated Base Salary</p>
                    <p id="proratedBase" class="text-2xl font-extrabold text-blue-600 mt-1">$0.00</p>
                </div>
                <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-100">
                    <p class="text-sm font-medium text-gray-500">Total Prorated Quota</p>
                    <p id="totalQuota" class="text-2xl font-extrabold text-blue-600 mt-1">$0.00</p>
                </div>
                <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-100">
                    <p class="text-sm font-medium text-gray-500">Total Commission Earned</p>
                    <p id="totalCommission" class="text-2xl font-extrabold text-blue-600 mt-1">$0.00</p>
                </div>
                <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-100">
                    <p class="text-sm font-medium text-gray-500">Total Monthly Pay</p>
                    <p id="totalPay" class="text-2xl font-extrabold text-green-600 mt-1">$0.00</p>
                </div>
            </div>
            <div id="error-message" class="text-red-600 mt-4 text-center font-medium hidden"></div>
        </div>
    </div>

    <script>
        // Helper function to get the number of days in a given month and year
        function daysInMonth(month, year) {
            // month is 0-indexed for the Date object
            return new Date(year, month + 1, 0).getDate();
        }

        // Main calculation logic
        function calculatePay() {
            // Get all input values
            const originalAnnualSalary = parseFloat(document.getElementById('originalAnnualSalary').value) || 0;
            const originalMonthlyQuota = parseFloat(document.getElementById('originalMonthlyQuota').value) || 0;
            const originalCommissionPercentage = parseFloat(document.getElementById('originalCommissionPercentage').value) || 0;
            
            const changeDateInput = document.getElementById('changeDate').value;
            const newAnnualSalary = parseFloat(document.getElementById('newAnnualSalary').value) || 0;
            const newMonthlyQuota = parseFloat(document.getElementById('newMonthlyQuota').value) || 0;
            const newCommissionPercentage = parseFloat(document.getElementById('newCommissionPercentage').value) || 0;
            
            const totalMonthlyRevenue = parseFloat(document.getElementById('totalMonthlyRevenue').value) || 0;
            
            const resultsDiv = document.getElementById('results');
            const errorMessageDiv = document.getElementById('error-message');

            // Simple validation
            if (!changeDateInput) {
                errorMessageDiv.textContent = 'Please select a date for the change.';
                errorMessageDiv.classList.remove('hidden');
                resultsDiv.classList.add('hidden');
                return;
            }

            const changeDate = new Date(changeDateInput);
            const year = changeDate.getFullYear();
            const month = changeDate.getMonth(); // getMonth() is 0-indexed for Date object
            const dayOfChange = changeDate.getDate();

            // Calculate total days in the month
            const totalDaysInMonth = daysInMonth(month, year);
            
            // Calculate days in each position
            const daysInOriginalPosition = dayOfChange - 1;
            const daysInNewPosition = totalDaysInMonth - daysInOriginalPosition;
            
            if (daysInOriginalPosition < 0) {
                 errorMessageDiv.textContent = 'Date of change must be a valid date within the month.';
                 errorMessageDiv.classList.remove('hidden');
                 resultsDiv.classList.add('hidden');
                 return;
            }

            // Calculate daily salaries
            const originalDailySalary = (originalAnnualSalary / 52) / 7;
            const newDailySalary = (newAnnualSalary / 52) / 7;
            
            // Prorated Base Salary
            const proratedOriginalBase = originalDailySalary * daysInOriginalPosition;
            const proratedNewBase = newDailySalary * daysInNewPosition;
            const totalProratedBase = proratedOriginalBase + proratedNewBase;

            // Prorated Quota
            const proratedOriginalQuota = (originalMonthlyQuota / totalDaysInMonth) * daysInOriginalPosition;
            const proratedNewQuota = (newMonthlyQuota / totalDaysInMonth) * daysInNewPosition;
            const totalProratedQuota = proratedOriginalQuota + proratedNewQuota;
            
            // Weighted Commission Percentage
            const weightedCommissionPercentage = ((originalCommissionPercentage * daysInOriginalPosition) + (newCommissionPercentage * daysInNewPosition)) / totalDaysInMonth;

            // Commission Calculation
            const commissionableRevenue = Math.max(0, totalMonthlyRevenue - totalProratedQuota);
            const totalCommissionEarned = commissionableRevenue * weightedCommissionPercentage;
            
            // Total Pay
            const totalPay = totalProratedBase + totalCommissionEarned;

            // Display results
            document.getElementById('proratedBase').textContent = `$${totalProratedBase.toFixed(2)}`;
            document.getElementById('totalQuota').textContent = `$${totalProratedQuota.toFixed(2)}`;
            document.getElementById('totalCommission').textContent = `$${totalCommissionEarned.toFixed(2)}`;
            document.getElementById('totalPay').textContent = `$${totalPay.toFixed(2)}`;

            resultsDiv.classList.remove('hidden');
            errorMessageDiv.classList.add('hidden');
        }

        // Add event listener to the button
        document.getElementById('calculateButton').addEventListener('click', calculatePay);
        
        // Add event listeners to input fields to trigger calculation on change
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', calculatePay);
        });

        // Run calculation on initial load with default values
        document.addEventListener('DOMContentLoaded', calculatePay);
    </script>
</body>
</html>
